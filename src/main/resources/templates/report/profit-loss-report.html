<!DOCTYPE html>
<html class="loading" lang="en" xmlns:th="www.http://thymeleaf.org">
<!-- BEGIN : Head-->

<head>
    <head th:replace="fragments :: page_head"/>
    <title>Profit | Loss Report</title>
    <link rel="shortcut icon" type="image/x-icon" th:href="@{/img/logos/logo-color-big.png}">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <!-- END: Custom CSS-->
</head>
<!-- END : Head-->

<!-- BEGIN : Body-->

<body class="horizontal-layout horizontal-menu horizontal-menu-padding 2-columns  navbar-sticky" data-open="hover"
      data-menu="horizontal-menu" data-col="2-columns">

<div th:replace="fragments :: page_header"/>
<!-- Navbar (Header) Ends-->

<!-- ////////////////////////////////////////////////////////////////////////////-->
<div class="wrapper">
    <div th:replace="fragments :: page_menu"/>

    <div class="main-panel">
        <!-- BEGIN : Main Content-->
        <div class="main-content">
            <div class="content-overlay"></div>
            <div class="content-wrapper">
                <section class="users-list-wrapper">
                    <div class="row">
                        <div class="col-12">
                            <div class="content-header">Profit Loss Report</div>
                        </div>
                    </div>

                    <!-- File export table -->
                    <section id="file-export">
                        <div class="row">
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-header">
                                        <h4 class="card-title">Report export</h4>
                                    </div>
                                    <div class="card-content fw-container">
                                        <div class="card-body fw-body">
                                            <!-- Datatable starts -->
                                            <div class="table-responsive content demo-html">
                                                <table id="example" class="table table-striped table-bordered file-export" style="width:100%">
                                                    <thead>
                                                    <tr>
                                                        <!--                                                            <th>Month</th>-->
                                                        <th>Total Cost</th>
                                                        <th>Total Sales</th>
                                                        <th>Total Tax</th>
                                                        <th>Profit/Loss</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>

                                                    <tr>
                                                        <td th:text="${profitLoss.get('totalCost')}"></td>
                                                        <td th:text="${profitLoss.get('totalSale')}"></td>
                                                        <td th:text="${profitLoss.get('totalTax')}"></td>

                                                        <td th:text = "${profitLoss.get('totalSale')-profitLoss.get('totalCost')}"></td>

                                                    </tr>
                                                    </tbody>

                                                    <tfoot>

                                                    <tr>
                                                        <!--                                                        <th>Month</th>-->

                                                        <th>Total Tax</th>
                                                        <th>Total Cost</th>
                                                        <th>Total Sales</th>
                                                        <th>Profit/Loss</th>
                                                    </tr>
                                                    </tfoot>
                                                </table>

                                                <table id="example" class="table table-striped table-bordered file-export" style="width:100%">
                                                    <thead>
                                                    <tr>

                                                        <th>Product Name</th>
                                                        <th>Total Purchased Qty</th>
                                                        <th>Total Sold Qty</th>
                                                        <th>Profit/Loss</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>

                                                    <tr th:each="pt : ${productsTotal}">
                                                        <td th:text="${pt.name}"></td>
                                                        <td th:text="${pt.purchasedQty}"></td>
                                                        <td th:text="${pt.soldQty}"></td>

                                                        <td th:text = "${pt.totalIncome-pt.totalCost}"></td>

                                                    </tr>
                                                    </tbody>
                                                </table>

                                                <div class="col-md-12 d-flex flex-sm-row flex-column  justify-content-md-end">
                                                    <a id="button-a" th:href="@{/report/export}" type="button" class="btn btn-danger"><i class="fa fa-file-pdf-o mr-1"></i> Export as PDF</a>

                                                    <a id="button-b" th:href="@{/report/downloadPDF}" type="button" class="btn btn-success"><i class="fa fa-paper-plane mr-1"></i>Download</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
            </div>
            </section>
            <!-- File export table -->
            </section>
        </div>
    </div>
    <!-- END : End Main Content-->

    <!-- Scroll to top button -->
</div>
</div>
<!-- ////////////////////////////////////////////////////////////////////////////-->


<footer th:replace="fragments :: page_footer"></footer>
<div class="sidenav-overlay"></div>
<!-- BEGIN PAGE LEVEL JS-->
<script th:src="@{/js/dashboard2.js}"></script>
<!-- END PAGE LEVEL JS-->
<!-- BEGIN: Custom CSS-->
<script th:src="@{/assets/js/scripts.js}"></script>
<!-- END: Custom CSS-->
</body>
<!-- END : Body-->

</html>